[gd_scene load_steps=14 format=3 uid="uid://b4by48scsegxa"]

[ext_resource type="Script" path="res://scripts/flea.gd" id="1_41r4s"]
[ext_resource type="Texture2D" uid="uid://bqq7v3yi7nbon" path="res://asserts/flea.png" id="2_df7or"]
[ext_resource type="Texture2D" uid="uid://c4248o2cdfogp" path="res://asserts/cat.png" id="3_k72yv"]
[ext_resource type="Script" path="res://scripts/cat.gd" id="3_sytse"]
[ext_resource type="Shader" uid="uid://b1r7n5a7y0fdh" path="res://shaders/anger.tres" id="4_kmq0x"]
[ext_resource type="Script" path="res://scripts/mount_manager.gd" id="5_eit62"]
[ext_resource type="Script" path="res://scripts/camera.gd" id="8_8dbba"]
[ext_resource type="Script" path="res://scripts/floor_manager.gd" id="8_x2riw"]
[ext_resource type="PackedScene" uid="uid://bak2tw380pdpc" path="res://scenes/floor.tscn" id="9_y1ysk"]

[sub_resource type="ShaderMaterial" id="ShaderMaterial_0h7o8"]
shader = ExtResource("4_kmq0x")
shader_parameter/Angry = false
shader_parameter/AngryTint = Color(1, 0, 0, 1)

[sub_resource type="Animation" id="Animation_5oeis"]
resource_name = "hit"
length = 0.4
loop_mode = 1
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Cat:material:shader_parameter/Angry")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.2),
"transitions": PackedFloat32Array(1, 1),
"update": 1,
"values": [true, false]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("Cat:material:shader_parameter/AngryTint")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Color(1, 0, 0, 1)]
}

[sub_resource type="Animation" id="Animation_twite"]
length = 0.001
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Cat:material:shader_parameter/Angry")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [false]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("Cat:material:shader_parameter/AngryTint")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Color(1, 0, 0, 1)]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_gcg7k"]
_data = {
"RESET": SubResource("Animation_twite"),
"hit": SubResource("Animation_5oeis")
}

[node name="Main" type="Node2D"]

[node name="Flea" type="CharacterBody2D" parent="."]
z_index = 1
position = Vector2(20, 8.525)
collision_layer = 2
collision_mask = 5
script = ExtResource("1_41r4s")

[node name="Flea" type="Sprite2D" parent="Flea"]
texture = ExtResource("2_df7or")

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="Flea"]
polygon = PackedVector2Array(-1, 6.475, -11, 6.475, -15, 2.475, -15, -6.525, -11, -10.525, 1, -10.525, 3, -8.525, 8, -8.525, 12, -3.525, 12, 0.475, 9, 3.475, 1, 3.475)

[node name="AttackContainer" type="Node2D" parent="Flea"]
position = Vector2(20, -6.525)

[node name="Cat" type="CharacterBody2D" parent="."]
position = Vector2(300, 300.19)
collision_layer = 4
collision_mask = 5
script = ExtResource("3_sytse")

[node name="Cat" type="Sprite2D" parent="Cat"]
texture_filter = 2
material = SubResource("ShaderMaterial_0h7o8")
scale = Vector2(3, 3)
texture = ExtResource("3_k72yv")

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="Cat"]
polygon = PackedVector2Array(-74, -27.19, -85, -18.19, -98, -29.19, -95, -49.19, -61, -58.19, -43, -42.19, -39, -13.19, -42, 5.81, -4, -8.19, 38, 2.81, 38, -14.19, 55, -11.19, 66, -14.19, 80, 11.81, 79, 29.81, 48, 36.81, 35, 69.81, 15, 70.81, 19, 48.81, -18, 44.81, -18, 67.81, -42, 72.81, -48, 52.81, -55, 33.81, -66, 17.81, -64, -19.19, -72, -37.19)

[node name="MountAnchor" type="Node2D" parent="Cat"]
position = Vector2(25, -12)

[node name="AnimationPlayer" type="AnimationPlayer" parent="Cat"]
libraries = {
"": SubResource("AnimationLibrary_gcg7k")
}

[node name="MountManager" type="Node2D" parent="."]
script = ExtResource("5_eit62")

[node name="Camera2D" type="Camera2D" parent="."]
position = Vector2(0, 240)
script = ExtResource("8_8dbba")

[node name="FloorManager" type="Node2D" parent="."]
script = ExtResource("8_x2riw")

[node name="Floor" parent="FloorManager" instance=ExtResource("9_y1ysk")]
position = Vector2(-320, 420)

[node name="Floor2" parent="FloorManager" instance=ExtResource("9_y1ysk")]

[node name="Floor3" parent="FloorManager" instance=ExtResource("9_y1ysk")]
position = Vector2(960, 420)
